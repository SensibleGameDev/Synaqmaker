{% extends "base.html" %}
{% block title %}Олимпиада{% endblock %}
{% block content %}
<div class="text-center">
    <h1 class="display-4">Режим Олимпиады</h1>
    <p class="lead">Проверьте свои навыки в условиях ограниченного времени.</p>
    <hr>
    <div class="row mt-4">
        <div class="col-md-6">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">Для организатора</h5>
                    <p class="card-text">Создайте новую олимпиаду, выберите задачи и запустите соревнование для участников.</p>
                    <a href="{{ url_for('olympiad_create') }}" class="btn btn-primary"><i class="bi bi-plus-circle"></i> Создать олимпиаду</a>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">Для студента</h5>
                    <p class="card-text">Присоединитесь к уже созданной олимпиаде по её ID и вашему никнейму.</p>
                    <a href="{{ url_for('olympiad_join') }}" class="btn btn-success"><i class="bi bi-box-arrow-in-right"></i> Присоединиться</a>
                </div>
            </div>
        </div>
    </div>
</div>
{% if session.get('is_admin') and active_olympiads %}
<hr class="my-5">
<div class="mt-4">
    <h2 class="text-center mb-4">Активные олимпиады</h2>
    <div class="card shadow-sm">
        <div class="card-body">
            <div class="list-group">
                {% for o_id, o_data in active_olympiads.items() %}
                <div class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                    <div>
                        <h5 class="mb-1">ID Олимпиады: <kbd>{{ o_id }}</kbd></h5>
                        <p class="mb-1">
                            Статус: 
                            {% if o_data.status == 'running' %}
                                <span class="badge bg-success">Идёт</span>
                            {% else %}
                                <span class="badge bg-warning text-dark">Ожидание</span>
                            {% endif %}
                            <span class="ms-3">
                                Участников: <strong>{{ o_data.participants|length }}</strong>
                            </span>
                        </p>
                    </div>
                    <a href="{{ url_for('olympiad_host', olympiad_id=o_id) }}" class="btn btn-outline-primary">
                        <i class="bi bi-sliders"></i> Перейти к управлению
                    </a>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>
{% endif %}
{% endblock %}